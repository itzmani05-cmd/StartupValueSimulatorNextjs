# Supabase Callback URL Configuration

This document explains how to properly configure the Supabase callback URL for Google OAuth authentication in your Startup Value Simulator application.

## Current Callback URL

The callback URL for your Supabase project is:

```
https://YOUR_SUPABASE_PROJECT_ID.supabase.co/auth/v1/callback
```

This URL is automatically generated by Supabase and is used to handle OAuth callbacks from providers like Google.

## Required Configuration

To ensure Google OAuth works correctly with your application, you need to configure this callback URL in two places:

### 1. Google Cloud Console

1. Go to the [Google Cloud Console](https://console.cloud.google.com/)
2. Select your project
3. Navigate to **APIs & Services** → **Credentials**
4. Find your OAuth 2.0 Client ID
5. Click the edit icon (pencil)
6. In the **Authorized redirect URIs** section, add:
   ```
   https://YOUR_SUPABASE_PROJECT_ID.supabase.co/auth/v1/callback
   ```
7. Click **Save**

### 2. Supabase Dashboard

1. Log into your [Supabase Dashboard](https://app.supabase.com/)
2. Select your project (`YOUR_SUPABASE_PROJECT_ID`)
3. Navigate to **Authentication** → **Providers**
4. Find the **Google** provider
5. In the **Redirect URLs** field, ensure this URL is included:
   ```
   https://YOUR_SUPABASE_PROJECT_ID.supabase.co/auth/v1/callback
   ```
6. Click **Save**

## Application Redirect Configuration

Your application also needs to specify where users should be redirected after authentication. In your code, this is handled by:

```typescript
const { error } = await supabase.auth.signInWithOAuth({
  provider: 'google',
  options: {
    redirectTo: window.location.origin + '/#/auth/callback',
  },
})
```

This means after Google authenticates the user, they will be redirected back to your application at:

- Local development: `http://localhost:[port]/#/auth/callback`
- Production: `https://[your-domain]/#/auth/callback`

## OAuth Flow

1. User clicks "Continue with Google" in your app
2. Your app redirects user to Google's OAuth endpoint
3. User authenticates with Google
4. Google redirects user to the Supabase callback URL
5. Supabase processes the authentication and redirects user to your specified `redirectTo` URL
6. Your [OAuthCallbackHandler.tsx](file:///c:/Users/welcome/Desktop/StartupValueSimulator/startup-simulator-next/src/components/OAuthCallbackHandler.tsx) component handles the final step of the authentication process

## Troubleshooting

If you're experiencing issues with the OAuth flow:

1. Ensure the Supabase callback URL is properly registered in Google Cloud Console
2. Verify that the Google provider is enabled in your Supabase dashboard
3. Check that your Google OAuth client ID is correctly set in your `.env.local` file
4. Make sure your `redirectTo` URL matches the routing configuration in your app

## Security Considerations

1. Never expose your Supabase anon key or Google client secret in client-side code
2. Always use environment variables for sensitive configuration
3. Regularly audit your redirect URIs and remove any that are no longer needed
4. Ensure you're using HTTPS in production environments
